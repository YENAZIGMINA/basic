<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>text_scroll_ani</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <div class="top" style="height: 100vh; background-color: black;"></div>

    <div class="main">
        <div class="cover">
            <div class="first-parallel">
                
            </div> <!-- .first-parallel end -->
        </div> <!-- .cover end -->
        <div class="cover">

            <div class="second-parallel">

            </div> <!-- .second-parallel end -->
        </div> <!-- .cover end -->
    </div> <!-- .main -->


    <div class="bottom" style="height: 100vh; background-color: black;"></div>


    <script>
        let pTag1=document.querySelector('.first-parallel');
        let pTag2=document.querySelector('.second-parallel');

        let textArr1='This is how life is. Live positive. ğŸ¤'.split(' ');
        //split : ë„ì›Œì“°ê¸°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ "ì˜ë¼ì„œ" ë°°ì—´
        //console.log(textArr1)

        let textArr2='Happiness and sadness alternate in our lives ğŸ¤'.split(' ');
        //console.log(textArr2)

        //let arr=[]; //ë°°ì—´ë§Œë“¤ê¸°
        //arr.push(...textArr1) //push : ì§‘ì–´ë„£ì–´ë¼~
        //console.log(arr)


        let count1 = 0;
        let count2 = 0;


        initTexts(pTag1,textArr1)
        initTexts(pTag2,textArr2)


        function initTexts (element,textArry){
            textArry.push(...textArry) //7ê°œì˜ ë°°ì—´ì— ë™ì¼í•œ ë°°ì—´ì„ ë³µì‚¬í•˜ì—¬ ë°°ì—´ë’¤ì— ë¶™ì—¬ë„£ìŒ (ì´ 14ê°œ ë°°ì—´)
            //console.log(textArry)
            for(let i=0; i<textArry.length; i++){
                //textArry.length -> textArryì˜ ì´ê°œìˆ˜ë§Œí¼
                element.innerHTML += `${textArry[i]}\u00A0\u00A0`;
                //[i]ë„£ì–´ì„œ ë°°ì—´ ë„£ì–´ì£¼ê¸°
                // \u00A0 : ë„ì›Œì“°ê¸°(ê³µë°± ë„£ì–´ì£¼ê¸°)
            }
        }
        //------------------------ê¸€ìì…ë ¥ğŸ’›

        function animate(){
            count1++;
            //console.log(count1)
            count2++;

            count1=marqueeText(count1,pTag1,-1); //pTag1ì„ ì›€ì§ì´ê³  -1ë°©í–¥
            count2=marqueeText(count2,pTag2,1); // 1 ë°©í–¥

            window.requestAnimationFrame(animate) 
            //requestAnimationFrameëŠ” setIntervalì˜ ì—…ê·¸ë ˆì´ë“œ ë²„ì „
            //animateí•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ì‹¤í–‰
        }

        function marqueeText(count, element, direction){
            //scrollWidth ---> ë³´ì´ì§€ì•ŠëŠ” ê³µê°„ì¼ì§€ë¼ë„ ìŠ¤í¬ë¡¤í•´ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê³µê°„ê¹Œì§€ì˜ ë„“ì´, ì „ì²´ë„“ì´ 
            //console.log(element.scrollWidth)
            if(count>element.scrollWidth / 2){
                count=0; // 0ê°’ì„ ì¤˜ì•¼ ë¹ˆí‹ˆì•ˆìƒê¹€
                element.style.transform=`translate(0,0)`
            }

            element.style.transform=`translate(${count * direction}px,0)`
            // * direction : ë°˜ëŒ€ë°©í–¥
            return count;
        }

        function scrollHandler (){
            count1 += 25; // 2) ìŠ¤í¬ë¡¤ì›€ì§ˆì¼ ë•Œ ë” ë¹¨ë¦¬
            count2 += 25;
        }

        animate();

        window.addEventListener("scroll",scrollHandler) //1) ìŠ¤í¬ë¡¤ì›€ì§ˆì¼ ë•Œ ë” ë¹¨ë¦¬


    </script>
</body>
</html>